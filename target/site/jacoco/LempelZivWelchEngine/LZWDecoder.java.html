<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LZWDecoder.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Puristin</a> &gt; <a href="index.source.html" class="el_package">LempelZivWelchEngine</a> &gt; <span class="el_source">LZWDecoder.java</span></div><h1>LZWDecoder.java</h1><pre class="source lang-java linenums">package LempelZivWelchEngine;

import java.util.ArrayList;

/*
The decoding algorithm works by reading a value from the encoded input and outputting the corresponding string from the initialized dictionary.
To rebuild the dictionary in the same way as it was built during encoding, it also obtains the next value from the input and adds to the dictionary
the concatenation of the current string and the first character of the string obtained by decoding the next input value, or the first character of
the string just output if the next value can not be decoded (If the next value is unknown to the decoder, then it must be the value added to the
dictionary this iteration, and so its first character must be the same as the first character of the current string being sent to decoded output).
The decoder then proceeds to the next input value (which was already read in as the &quot;next value&quot; in the previous pass) and repeats the process until
there is no more input, at which point the final input value is decoded without any more additions to the dictionary.
 */

<span class="fc" id="L15">public class LZWDecoder {</span>
<span class="fc" id="L16">    private DecodingTable decodingTable = new DecodingTable();</span>

    public String decode(ArrayList&lt;Integer&gt; input) {
<span class="fc" id="L19">        String output = &quot;&quot;;</span>

<span class="fc" id="L21">        int oldCode = input.get(0);</span>
<span class="fc" id="L22">        output = decodingTable.getStringForCode(oldCode);</span>

        int newCode;
<span class="fc" id="L25">        String currentString = new String();</span>
<span class="fc" id="L26">        String firstCharacter = new String();</span>

<span class="fc bfc" id="L28" title="All 2 branches covered.">        for (int i = 1; i &lt; input.size(); i++) {</span>
<span class="fc" id="L29">            newCode = input.get(i);</span>
<span class="pc bpc" id="L30" title="1 of 2 branches missed.">            if (!decodingTable.containsCode(newCode)) {</span>
<span class="nc" id="L31">                currentString = decodingTable.getStringForCode(oldCode);</span>
            } else {
<span class="fc" id="L33">                currentString = decodingTable.getStringForCode(newCode);</span>
            }
<span class="fc" id="L35">            output = output + currentString;</span>
<span class="fc" id="L36">            firstCharacter = currentString.substring(0, 1);</span>
<span class="fc" id="L37">            decodingTable.addString(decodingTable.getStringForCode(oldCode) + firstCharacter);</span>
<span class="fc" id="L38">            oldCode = newCode;</span>
        }

<span class="fc" id="L41">        return output;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>